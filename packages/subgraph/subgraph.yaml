specVersion: 1.3.0
indexerHints:
  prune: auto
description: AI Vault Protocol Subgraph
repository: https://github.com/scaffold-eth/se-2/packages/subgraph/
schema:
  file: ./src/schema.graphql
dataSources:
  - kind: ethereum
    name: VaultFactory
    network: sepolia
    source:
      abi: VaultFactory
      address: "0x88196cb89debc5681e78f860eb26cc3cbea52301"
      startBlock: 9374108
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - VaultFactory
        - Vault
        - Asset
        - VaultManager
      abis:
        - name: VaultFactory
          file: ./abis/localhost_VaultFactory.json
        - name: IERC20Metadata
          file: ./abis/IERC20Metadata.json
        - name: AIAgentVaultManager
          file: ./abis/localhost_AIAgentVaultManager.json
      eventHandlers:
        - event: VaultCreated(indexed address,indexed address,indexed
            address,string,string,uint256)
          handler: handleVaultCreated
      file: ./src/mappings/VaultFactory.ts
  - kind: ethereum
    name: AIAgentVaultManager
    network: sepolia
    source:
      abi: AIAgentVaultManager
      address: "0x2a79e44be58c2ea6c098554575005f659fad29ff"
      startBlock: 9374108
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - VaultManager
        - Vault
        - Allocation
        - AaveAdapter
        - UniswapV2Adapter
        - UniswapV3Adapter
      abis:
        - name: AIAgentVaultManager
          file: ./abis/localhost_AIAgentVaultManager.json
        - name: VaultImplementation
          file: ./abis/localhost_VaultImplementation.json
        - name: IERC20Metadata
          file: ./abis/IERC20Metadata.json
      eventHandlers:
        - event: VaultCreatedAndRegistered(indexed address,string)
          handler: handleVaultCreatedAndRegistered
        - event: AdapterAddedToList(indexed address,string)
          handler: handleAdapterAddedToList
      file: ./src/mappings/AIAgentVaultManager.ts
  - kind: ethereum
    name: VaultImplementation
    network: sepolia
    source:
      abi: VaultImplementation
      address: "0xe6211eefde76f052d0559541cfa05df8b4675d3c"
      startBlock: 9374108
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Vault
        - User
        - Deposit
        - Redeem
        - Allocation
        - UserVaultBalance
      abis:
        - name: VaultImplementation
          file: ./abis/localhost_VaultImplementation.json
        - name: IProtocolAdapter
          file: ./abis/IProtocolAdapter.json
        - name: IERC20Metadata
          file: ./abis/IERC20Metadata.json
      eventHandlers:
        - event: Deposit(uint256,indexed address,uint256)
          handler: handleDeposit
        - event: Redeem(uint256,indexed address,uint256)
          handler: handleRedeem
        - event: NoLongerActive()
          handler: handleNoLongerActive
        - event: HoldingAllocationUpdated((address,uint256)[])
          handler: handleHoldingAllocationUpdated
      file: ./src/mappings/VaultImplementation.ts
  - kind: ethereum
    name: VaultSharesETH
    network: sepolia
    source:
      abi: VaultSharesETH
      address: "0xcc80c5f5daf5d4904d4f3889b4fbcf515be5a567"
      startBlock: 9374109
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Vault
        - User
        - Deposit
        - Redeem
        - Allocation
        - UserVaultBalance
      abis:
        - name: VaultSharesETH
          file: ./abis/localhost_VaultSharesETH.json
        - name: IProtocolAdapter
          file: ./abis/IProtocolAdapter.json
        - name: IERC20Metadata
          file: ./abis/IERC20Metadata.json
      eventHandlers:
        - event: Deposit(uint256,indexed address,uint256)
          handler: handleDeposit
        - event: Redeem(uint256,indexed address,uint256)
          handler: handleRedeem
        - event: NoLongerActive()
          handler: handleNoLongerActive
        - event: HoldingAllocationUpdated((address,uint256)[])
          handler: handleHoldingAllocationUpdated
      file: ./src/mappings/VaultSharesETH.ts
  - kind: ethereum
    name: AaveAdapter
    network: sepolia
    source:
      abi: AaveAdapter
      address: "0x95c3328154f237472b6f56f1f869aff59b2a95a0"
      startBlock: 9374108
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - AaveAdapter
        - AaveTokenPosition
      abis:
        - name: AaveAdapter
          file: ./abis/localhost_AaveAdapter.json
      eventHandlers:
        - event: TokenVaultSet(indexed address,indexed address)
          handler: handleTokenVaultSet
        - event: Invested(indexed address,uint256,uint256)
          handler: handleInvested
        - event: Divested(indexed address,uint256,uint256)
          handler: handleDivested
      file: ./src/mappings/AaveAdapter.ts
  - kind: ethereum
    name: UniswapV2Adapter
    network: sepolia
    source:
      abi: UniswapV2Adapter
      address: "0xb5022824fa9d2d51dc009c1d7870c2dec7459b47"
      startBlock: 9374108
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - UniswapV2Adapter
        - UniswapV2TokenPosition
      abis:
        - name: UniswapV2Adapter
          file: ./abis/localhost_UniswapV2Adapter.json
      eventHandlers:
        - event: TokenConfigSet(indexed address,uint256,indexed address,indexed address)
          handler: handleTokenConfigSet
        - event: TokenConfigUpdated(indexed address,uint256)
          handler: handleTokenConfigUpdated
        - event: TokenConfigReinvested(indexed address,indexed address)
          handler: handleTokenConfigReinvested
        - event: UniswapInvested(indexed address,uint256,uint256,uint256)
          handler: handleUniswapInvested
        - event: UniswapDivested(indexed address,uint256,uint256,uint256)
          handler: handleUniswapDivested
      file: ./src/mappings/UniswapV2Adapter.ts
  - kind: ethereum
    name: UniswapV3Adapter
    network: sepolia
    source:
      abi: UniswapV3Adapter
      address: "0x01d5bfc9d59b4ce25778e9e085532d7310453332"
      startBlock: 9374108
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - UniswapV3Adapter
        - UniswapV3TokenPosition
      abis:
        - name: UniswapV3Adapter
          file: ./abis/localhost_UniswapV3Adapter.json
      eventHandlers:
        - event: TokenConfigSet(indexed address,uint256,indexed
            address,uint24,int24,int24,indexed address)
          handler: handleTokenConfigSet
        - event: TokenConfigUpdated(indexed address,uint256)
          handler: handleTokenConfigUpdated
        - event: TokenConfigReinvested(indexed address,indexed address,uint24,int24,int24)
          handler: handleTokenConfigReinvested
        - event: UniswapV3Invested(indexed address,uint256,uint256,uint256)
          handler: handleUniswapV3Invested
        - event: UniswapV3Divested(indexed address,uint256,uint256,uint256)
          handler: handleUniswapV3Divested
      file: ./src/mappings/UniswapV3Adapter.ts
templates:
  - kind: ethereum
    name: VaultInstance
    network: sepolia
    source:
      abi: VaultImplementation
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Vault
        - User
        - Deposit
        - Redeem
        - Allocation
        - UserVaultBalance
      abis:
        - name: VaultImplementation
          file: ./abis/localhost_VaultImplementation.json
        - name: IProtocolAdapter
          file: ./abis/IProtocolAdapter.json
        - name: IERC20Metadata
          file: ./abis/IERC20Metadata.json
      eventHandlers:
        - event: Deposit(uint256,indexed address,uint256)
          handler: handleDeposit
        - event: Redeem(uint256,indexed address,uint256)
          handler: handleRedeem
        - event: NoLongerActive()
          handler: handleNoLongerActive
        - event: HoldingAllocationUpdated((address,uint256)[])
          handler: handleHoldingAllocationUpdated
      file: ./src/mappings/VaultImplementation.ts
